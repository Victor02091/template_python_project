_jinja_extensions:
  - copier_template_extensions.TemplateExtensionLoader
  - extensions/context.py:GitInfoExtension

# 1. Questions
project_name:
  type: str
  help: Human-readable name (e.g., "My Data Processor")
  default: "{{ _copier_conf.dst_path.name | replace('_', ' ') | replace('-', ' ') | title }}"

project_slug:
  type: str
  help: Python package import name (e.g., "my_data_processor")
  default: "{{ project_name|lower|replace('-', '_')|replace(' ', '_') }}"

author_name:
  type: str
  help: Author Name
  default: "{{ git_user_name | default('Your Name', true) }}"

author_email:
  type: str
  help: Author Email
  default: "{{ git_user_email | default('your@email.com', true) }}"

description:
  type: str
  help: Short description of your project
  default: "A new Python project."

python_version:
  type: str
  help: Python version of this project
  default: "3.12"
  choices:
    - "3.13"
    - "3.12"
    - "3.11"
    - "3.10"
    - "3.9"

add_docker:
  type: bool
  default: true
  help: "Add Dockerfile? (Recommanded)"

install_dependencies:
  type: bool
  help: "Install dependencies for you ?"
  default: true

# 2. Hooks
_tasks:
  - command: "{{ _copier_python }} scripts/setup_dev.py"
    when: "{{ install_dependencies }}"

  # Cleanup
  - command: >-
      {{ _copier_python }} -c "import shutil; shutil.rmtree('scripts', ignore_errors=True)"

  # Initial commit
  - command: >-
      if [ ! -d .git ]; then
          echo "‚ú® Initializing new Git repository..." &&
          git init &&
          git add . &&
          git commit -m "chore: initial commit from template";
      else
          echo "üîÑ Updating existing Git repository..." &&
          git add . &&
          git commit -m "chore: init template" || echo "‚ö†Ô∏è Nothing to commit";
      fi

# 3. Configuration
_subdirectory: template
